# .env

# Exchange API keys
BYBIT_API_KEY=4UOcv1FxRyiYOuxcLb
BYBIT_API_SECRET=wpf4l9uJcpFNnQBiEqJbB4kwhyqwKyfUy1Zy

# Exchange mode configuration
# BYBIT_TESTNET: Trading exchange (orders/positions/balance)
#   - true: Use testnet for safe order execution
#   - false: Use mainnet for real trading
BYBIT_TESTNET=true

# DATA_BYBIT_TESTNET: Data exchange (market data/OHLCV/orderbook)
#   - false: Use mainnet data (matches paper trading environment)
#   - true: Use testnet data
# Keep this false to ensure MC/EV calculations use real market data
DATA_BYBIT_TESTNET=false

# Trading settings
ENABLE_LIVE_ORDERS=false
MAX_NOTIONAL_EXPOSURE=1000.0
MAX_CONCURRENT_POSITIONS=10
MAX_LEVERAGE=100
EXPOSURE_CAP_ENABLED=false
PAPER_EXIT_POLICY_DD_STOP_ROE=-0.01
HARD_STOP_LOSS_FRAC=0.010
DEFAULT_SIZE_FRAC=0.05

# Rebalancing settings
# PAPER_REBALANCE_MIN_CAP_DIFF: Minimum % difference in target vs current weight to trigger rebalance (e.g., 0.25 = 25%)
PAPER_REBALANCE_MIN_CAP_DIFF=0.05
# PAPER_REBALANCE_INTERVAL_MS: Minimum interval between rebalancing execution checks (60 seconds)
PAPER_REBALANCE_INTERVAL_MS=60000
# REBALANCE_TARGET_EMA_ALPHA: EMA factor for smoothing Kelly target weights (lower = smoother/slower)
REBALANCE_TARGET_EMA_ALPHA=0.1

# Risk management settings
# HARD_STOP_LOSS_FRAC: 하드캡 기본값 (새 설정이 없으면 PRICE/ROE 둘 다에 사용)
# HARD_STOP_LOSS_PRICE_FRAC: 진입가 대비 가격변동 하드캡 (unlevered)
# HARD_STOP_LOSS_ROE_FRAC: 포지션 ROE(=PnL/Margin, levered) 하드캡
HARD_STOP_LOSS_FRAC=0.01
HARD_STOP_LOSS_ROE_FRAC=0.05

# Live trading robust settings
LIVE_ORDER_PENDING_MS=60000
LOG_LIVE_SYNC_WARN_INTERVAL_SEC=60

# Live state persistence (optional, for exchange API failure recovery)
# LIVE_STATE_PERSIST_ENABLED: Enable saving live mode state to disk (default: false)
#   - Useful as fallback when exchange API is unreachable during engine restart
#   - Live state files: state/live_balance, state/live_trade_tape.json, state/live_equity.json
# LIVE_STATE_PERSIST_INTERVAL_SEC: How often to save live state (default: 60 seconds)
LIVE_STATE_PERSIST_ENABLED=false
LIVE_STATE_PERSIST_INTERVAL_SEC=60

# Trading mode
SCORE_ONLY_MODE=false

# Data settings
# 기존 paper trading에서 사용하던 전체 종목을 명시하면,
# Bybit testnet에 존재하는 심볼만 엔진 시작 시 자동 필터링되어 포함됩니다.
SYMBOLS_CSV=BTC/USDT:USDT,ETH/USDT:USDT,SOL/USDT:USDT,BNB/USDT:USDT,XRP/USDT:USDT,ADA/USDT:USDT,DOGE/USDT:USDT,DOT/USDT:USDT,NEAR/USDT:USDT,UNI/USDT:USDT,APT/USDT:USDT,SUI/USDT:USDT,SAND/USDT:USDT,LDO/USDT:USDT,CRV/USDT:USDT,HBAR/USDT:USDT,ICP/USDT:USDT,GMT/USDT:USDT
SPREAD_PAIRS=BTC/USDT:USDT,ETH/USDT:USDT;SOL/USDT:USDT,BNB/USDT:USDT
SPREAD_ENABLED=true
SPREAD_ENTRY_MAX=0.0005

# Decision settings
DECISION_REFRESH_SEC=30.0
DECISION_MAX_INFLIGHT=5
MAX_RETRY=3
RETRY_BASE_SEC=1.0
LOG_STDOUT=true

# OHLCV settings
OHLCV_SLEEP_SEC=10.0
OHLCV_PRELOAD_LIMIT=240
OHLCV_REFRESH_LIMIT=2

# Orderbook settings
ORDERBOOK_SLEEP_SEC=10.0

# Risk settings
EV_ENTRY_THRESHOLD=0.002
EV_EXIT_FLOOR_BULL=-0.0003
EV_EXIT_FLOOR_BEAR=-0.0003
EV_EXIT_FLOOR_CHOP=-0.0002
EV_EXIT_FLOOR_VOLATILE=-0.0002
